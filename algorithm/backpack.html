<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>背包问题</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="z7jf" id="背包问题">背包问题</h1><p data-anchor-id="m96r"><code>数据结构与算法</code></p><p data-anchor-id="4oep"><a href="http://blog.zhoulychn.com/algorithm/center.html" target="_blank">点击返回导航页</a></p><hr><div class="md-section-divider"></div><h2 data-anchor-id="ytn2" id="简单背包问题">简单背包问题</h2><div class="md-section-divider"></div><h3 data-anchor-id="q1my" id="问题描述-1">问题描述</h3><p data-anchor-id="hx2a">在n个物品中挑选若干物品装入背包，最多能装多满？假设背包的大小为m，每个物品的大小为A[i]，你不可以将物品进行切割。</p><div class="md-section-divider"></div><h3 data-anchor-id="lgi1" id="算法思路">算法思路</h3><p data-anchor-id="8ea9">问题中不考虑物品价值，只需考虑物品总重量最大，可以递归加入每个物品，并保存1-m重量下背包的局部最优重量，最后得到最优的总重量。</p><div class="md-section-divider"></div><h3 data-anchor-id="2vqv" id="代码实现">代码实现</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="3621"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> backPack</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> A</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">//重量为1 - m的背包，保存局部最优重量值</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> f</span><span class="pun">[]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="pln">m </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="com">//遍历每个物品</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">:</span><span class="pln"> A</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="com">//处理区间：当前物品重量和背包重量</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> m</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&gt;=</span><span class="pln"> i</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">--)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="com">//后者表示不添加此物品的最优重量 + 当前重量</span></code></li><li class="L2"><code class="language-java"><span class="pln">            f</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="pln">f</span><span class="pun">[</span><span class="pln">j</span><span class="pun">],</span><span class="pln"> f</span><span class="pun">[</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> i</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="com">//返回最大重量的最优解</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> f</span><span class="pun">[</span><span class="pln">m</span><span class="pun">];</span></code></li><li class="L9"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="sed8" id="背包问题-1">背包问题</h2><div class="md-section-divider"></div><h3 data-anchor-id="d45r" id="问题描述">问题描述</h3><p data-anchor-id="0xqq">给出n个物品的体积A[i]和其价值V[i]，将他们装入一个大小为m的背包，最多能装入的总价值有多大？</p><p data-anchor-id="gri3">A[i], V[i], n, m均为整数。你不能将物品进行切分。你所挑选的物品总体积需要小于等于给定的m。</p><div class="md-section-divider"></div><h3 data-anchor-id="j6d8" id="算法思路-1">算法思路</h3><p data-anchor-id="c0pb">根据上一个问题的解法，最佳的解决方法是使用动态规划——先得到该问题的局部解然后扩展到全局问题解。但是此时除了重量外主要考虑物品的总价值。</p><p data-anchor-id="vvh9">简单来说，前一行的值本身就是个更小的背包问题解，它的含义是到该重量时背包内物品的最大价值（通过遍历物品得到）。</p><div class="md-section-divider"></div><h3 data-anchor-id="e4xy" id="代码实现-1">代码实现</h3><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="g8b0"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> backPackII</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> m</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> A</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[]</span><span class="pln"> V</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">//最优解数据保存，二维数组保存每一次加入物品后各个重量的局部最优解，清晰理解。</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="com">//此处也可以跟上个问题一样，用一维数组保存最后一次加入物品后的最优解即可。</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> s </span><span class="pun">=</span><span class="pln"> A</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="com">//s为物品数量，m为背包重量，下标从1开始。</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> wt</span><span class="pun">[][]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">[</span><span class="pln">s </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">][</span><span class="pln">m </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">//遍历每个物品</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span><span class="pln"> s</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="com">//获取当前物品重量和价值</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> weight </span><span class="pun">=</span><span class="pln"> A</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">],</span><span class="pln"> value </span><span class="pun">=</span><span class="pln"> V</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> j </span><span class="pun">&lt;=</span><span class="pln"> m</span><span class="pun">;</span><span class="pln"> j</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="com">//可以装下当前物品，则判断价值是否最优</span></code></li><li class="L8"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">j </span><span class="pun">&gt;=</span><span class="pln"> weight</span><span class="pun">)</span></code></li><li class="L9"><code class="language-java"><span class="pln">                wt</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Math</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="pln">wt</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">][</span><span class="pln">j</span><span class="pun">],</span><span class="pln"> wt</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">][</span><span class="pln">j </span><span class="pun">-</span><span class="pln"> weight</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> value</span><span class="pun">);</span></code></li><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="pln">            </span><span class="com">//不能装下则直接为上次结果</span></code></li><li class="L2"><code class="language-java"><span class="pln">            </span><span class="kwd">else</span></code></li><li class="L3"><code class="language-java"><span class="pln">                wt</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> wt</span><span class="pun">[</span><span class="pln">i </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">][</span><span class="pln">j</span><span class="pun">];</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> wt</span><span class="pun">[</span><span class="pln">s</span><span class="pun">][</span><span class="pln">m</span><span class="pun">];</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li></ol></pre></div>
</body>
</html>