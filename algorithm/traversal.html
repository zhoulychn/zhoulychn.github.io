<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>二叉树非递归遍历</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="ckpw" id="二叉树非递归遍历">二叉树非递归遍历</h1><p data-anchor-id="e0s5"><code>数据结构与算法</code></p><p data-anchor-id="4q8k"><a href="http://blog.zhoulychn.com/algorithm/center.html" target="_blank">点击返回导航页</a></p><hr><div class="md-section-divider"></div><h2 data-anchor-id="0uj9" id="问题描述">问题描述</h2><p data-anchor-id="al8k">给出一棵二叉树，用非递归的方式返回其节点值的先、中、后序遍历。</p><div class="md-section-divider"></div><h2 data-anchor-id="4269" id="前序遍历">前序遍历</h2><p data-anchor-id="3usj">使用栈，然后每次取出一个结点，访问，然后按顺序将该结点的右左结点压入栈，就可以得到先序遍历结果。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="tszo"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> inorderTraversal</span><span class="pun">(</span><span class="typ">TreeNode</span><span class="pln"> root</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">//记录遍历序列</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">root </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="com">//定义栈，并压入根节点。</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="typ">Stack</span><span class="pun">&lt;</span><span class="typ">TreeNode</span><span class="pun">&gt;</span><span class="pln"> stack </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">&lt;&gt;();</span></code></li><li class="L0"><code class="language-java"><span class="pln">    stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">root</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">stack</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="com">//取出结点访问，然后压入右结点，左结点。</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="typ">TreeNode</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> stack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span></code></li><li class="L5"><code class="language-java"><span class="pln">        result</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">val</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">            stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ee71" id="中序遍历">中序遍历</h2><p data-anchor-id="7pk3">结点向左下遍历，直到为null再回退，指向右孩子，然后循环相同的操作。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="7set"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> inorderTraversal</span><span class="pun">(</span><span class="typ">TreeNode</span><span class="pln"> root</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">root </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="typ">Stack</span><span class="pun">&lt;</span><span class="typ">TreeNode</span><span class="pun">&gt;</span><span class="pln"> stack </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">&lt;&gt;();</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="typ">TreeNode</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> root</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="com">//当node最后指向right为null时，用栈来判断</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> </span><span class="pun">!</span><span class="pln">stack</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="com">//左下结点全部入栈</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">            stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">            node </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">left</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="com">//当结点为空，取出一个，并入序列，然后指向右孩子。</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">stack</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            node </span><span class="pun">=</span><span class="pln"> stack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"><span class="pln">            result</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">val</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pln">            node </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">.</span><span class="pln">right</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="6flh" id="后序遍历">后序遍历</h2><p data-anchor-id="filw">将先序遍历入栈顺序右到左改为左到右，得到该序列的逆序列就是后序序列，用栈保存最后打印。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="raph"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> postorderTraversal</span><span class="pun">(</span><span class="typ">TreeNode</span><span class="pln"> root</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;();</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">root </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="com">//两个栈，一个用于遍历，一个用于反向输出结果</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="typ">Stack</span><span class="pun">&lt;</span><span class="typ">TreeNode</span><span class="pun">&gt;</span><span class="pln"> stack </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">&lt;&gt;();</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="typ">Stack</span><span class="pun">&lt;</span><span class="typ">TreeNode</span><span class="pun">&gt;</span><span class="pln"> temp </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Stack</span><span class="pun">&lt;&gt;();</span></code></li><li class="L7"><code class="language-java"><span class="pln">    stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">root</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">stack</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="typ">TreeNode</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> stack</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">();</span></code></li><li class="L1"><code class="language-java"><span class="pln">        temp</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="com">//先压入左孩子，再压入右孩子</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> stack</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">temp</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> result</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">temp</span><span class="pun">.</span><span class="pln">pop</span><span class="pun">().</span><span class="pln">val</span><span class="pun">);</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="28m6" id="层次遍历">层次遍历</h2><p data-anchor-id="luyg">用队列实现，每次取出一个结点，将其左右孩子按顺序入队，循环此操作。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="9mdl"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;&gt;</span><span class="pln"> levelOrder</span><span class="pun">(</span><span class="typ">TreeNode</span><span class="pln"> root</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="typ">ArrayDeque</span><span class="pun">&lt;</span><span class="typ">TreeNode</span><span class="pun">&gt;</span><span class="pln"> deque </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayDeque</span><span class="pun">&lt;&gt;();</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;&gt;</span><span class="pln"> result </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">root </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    deque</span><span class="pun">.</span><span class="pln">offer</span><span class="pun">(</span><span class="pln">root</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">deque</span><span class="pun">.</span><span class="pln">isEmpty</span><span class="pun">())</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="typ">List</span><span class="pun">&lt;</span><span class="typ">Integer</span><span class="pun">&gt;</span><span class="pln"> list </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">ArrayList</span><span class="pun">&lt;&gt;();</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> deque</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="com">//不要用deque的size方法，循环过程中会不断变化</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> size</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">            </span><span class="com">//取出结点，压入左右孩子</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="typ">TreeNode</span><span class="pln"> node </span><span class="pun">=</span><span class="pln"> deque</span><span class="pun">.</span><span class="pln">poll</span><span class="pun">();</span></code></li><li class="L4"><code class="language-java"><span class="pln">            list</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">val</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> deque</span><span class="pun">.</span><span class="pln">offer</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">left</span><span class="pun">);</span></code></li><li class="L6"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> deque</span><span class="pun">.</span><span class="pln">offer</span><span class="pun">(</span><span class="pln">node</span><span class="pun">.</span><span class="pln">right</span><span class="pun">);</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">        result</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">list</span><span class="pun">);</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> result</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pun">}</span></code></li></ol></pre></div>
</body>
</html>