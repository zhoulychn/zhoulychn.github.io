<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>LinkedList</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="v1dh" id="linkedlist">LinkedList</h1><p data-anchor-id="owgi"><code>集合</code></p><p data-anchor-id="lz73"><a href="http://blog.zhoulychn.com/JavaSE/center.html" target="_blank">点击返回导航页</a></p><hr><p data-anchor-id="4p82"><div class="toc"><div class="toc">
<ul>
<li><a href="#linkedlist">LinkedList</a><ul>
<li><a href="#基础结构">基础结构</a></li>
<li><a href="#1-get">(1) get</a></li>
<li><a href="#2-indexof">(2) indexOf</a></li>
<li><a href="#3-add">(3) add</a></li>
<li><a href="#4-set">(4) set</a></li>
<li><a href="#5-remove">(5) remove</a></li>
<li><a href="#6-unlink">(6) unlink</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="yxb1" id="基础结构">基础结构</h2><p data-anchor-id="d5wt"><strong>存储结构</strong>: <br>
<img src="http://static.zybuluo.com/zy380104192/k7q0ygzehalfs3s6f372jr6f/u=522931105,3311689058&amp;fm=27&amp;gp=0.jpg" alt="u=522931105,3311689058&amp;fm=27&amp;gp=0.jpg-18.5kB"></p><p data-anchor-id="c1dj">继承结构: <br>
<img src="http://static.zybuluo.com/zy380104192/7p07ksgd5y5cjt2iwc38b9ye/QQ%E6%88%AA%E5%9B%BE20180304125456.png" alt="QQ截图20180304125456.png-18.3kB"></p><p data-anchor-id="g4ly">LinkedList同时实现了List和Deque接口(双端队列)，Cloneable，Serializable。</p><p data-anchor-id="0plo">既可以看作一个队列(queue)，又可以看作一个栈(stack)。当你需要使用栈或者队列时，可以考虑使用LinkedList，一方面是因为Java官方已经声明不建议使用Stack类，更遗憾的是，Java里根本没有一个叫做Queue的类（它是个接口名字）。</p><p data-anchor-id="i2fx">关于栈或队列，首选是ArrayDeque，它的性能更好。</p><p data-anchor-id="97pq">双向链表的每个结点用内部类Node表示。LinkedList通过first和last引用分别指向链表的第一个和最后一个元素，两端既可以输入也可以输出，并且结点维护了前驱和后继。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="150b"><ol class="linenums"><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="kwd">transient</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> size </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">  </span><span class="com">//初始元素数量</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="kwd">transient</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> first</span><span class="pun">;</span><span class="pln">  </span><span class="com">//头结点</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="kwd">transient</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> last</span><span class="pun">;</span><span class="pln">  </span><span class="com">//尾结点</span></code></li><li class="L6"><code class="language-java"></code></li><li class="L7"><code class="language-java"><span class="kwd">private</span><span class="pln"> </span><span class="kwd">static</span><span class="pln"> </span><span class="kwd">class</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">    E item</span><span class="pun">;</span><span class="pln">    </span><span class="com">//元素</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> next</span><span class="pun">;</span><span class="pln">    </span><span class="com">//下一个结点</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> prev</span><span class="pun">;</span><span class="pln">    </span><span class="com">//上一个结点</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="typ">Node</span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> prev</span><span class="pun">,</span><span class="pln"> E element</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">item </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">next </span><span class="pun">=</span><span class="pln"> next</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">prev </span><span class="pun">=</span><span class="pln"> prev</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="rvx7">LinkedList的实现方式决定了所有跟下标相关的操作都是线性时间，而在首段或者末尾删除元素只需要常数时间。</p><div class="md-section-divider"></div><h2 data-anchor-id="hdzh" id="1-get">(1) get</h2><p data-anchor-id="r8fq">此方法根据索引值来查找元素，因为底层结构是链表，所以查找时长为线性时间。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="luwf"><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">//直接根据索引获取</span></code></li><li class="L1"><code class="language-java"><span class="kwd">public</span><span class="pln"> E get</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">    checkElementIndex</span><span class="pun">(</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">index</span><span class="pun">).</span><span class="pln">item</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="com">//索引查找结点</span></code></li><li class="L7"><code class="language-java"><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> node</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="com">// assert isElementIndex(index);</span></code></li><li class="L9"><code class="language-java"></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="com">//此处判断索引在前半部还是后半部，来使用不同的遍历方式，效率更高</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">&lt;</span><span class="pln"> </span><span class="pun">(</span><span class="pln">size </span><span class="pun">&gt;&gt;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="com">//右移一位，相当于除2</span></code></li><li class="L3"><code class="language-java"><span class="pln">        </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> index</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span></code></li><li class="L5"><code class="language-java"><span class="pln">            x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">        </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> last</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> size </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&gt;</span><span class="pln"> index</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">--)</span></code></li><li class="L0"><code class="language-java"><span class="pln">            x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">prev</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> x</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="7bjn" id="2-indexof">(2) indexOf</h2><p data-anchor-id="sk7k">按顺序查找链表中第一个与指定元素等价的元素，并返回索引位置。</p><p data-anchor-id="0bvy">镜像方法:lastIndexOf，反向遍历即可。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="9vi7"><ol class="linenums"><li class="L0"><code class="language-java"></code></li><li class="L1"><code class="language-java"><span class="com">//查找null和为空对象方法不同，但如果对象没有重写equals方法，则其实效果一样。</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> indexOf</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> o</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">int</span><span class="pln"> index </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">item </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span></code></li><li class="L8"><code class="language-java"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> index</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">            index</span><span class="pun">++;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">item</span><span class="pun">))</span><span class="pln">  </span><span class="com">//equals方法比较</span></code></li><li class="L4"><code class="language-java"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> index</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">            index</span><span class="pun">++;</span></code></li><li class="L6"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="3hbe" id="3-add">(3) add</h2><p data-anchor-id="dra0">添加的方法有两种，第一种是在链表末尾追加。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="mma2"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> add</span><span class="pun">(</span><span class="pln">E e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    linkLast</span><span class="pun">(</span><span class="pln">e</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="kwd">void</span><span class="pln"> linkLast</span><span class="pun">(</span><span class="pln">E e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="com">//队尾元素</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> last</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="com">//构造新结点，pre指向队尾</span></code></li><li class="L0"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> newNode </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;&gt;(</span><span class="pln">l</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">);</span></code></li><li class="L1"><code class="language-java"></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">//新结点设为队尾</span></code></li><li class="L3"><code class="language-java"><span class="pln">    last </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="com">//旧队尾为空，则队头也为新元素</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">l </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span></code></li><li class="L7"><code class="language-java"><span class="pln">        first </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="com">//将旧队尾的next连接到新队尾</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L0"><code class="language-java"><span class="pln">        l</span><span class="pun">.</span><span class="pln">next </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">    size</span><span class="pun">++;</span></code></li><li class="L2"><code class="language-java"><span class="pln">    modCount</span><span class="pun">++;</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="ecna">第二种在索引位置处添加，先根据索引找结点，然后插入。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="nja2"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> add</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">,</span><span class="pln"> E element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    checkPositionIndex</span><span class="pun">(</span><span class="pln">index</span><span class="pun">);</span><span class="pln">  </span><span class="com">//检查索引</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">index </span><span class="pun">==</span><span class="pln"> size</span><span class="pun">)</span></code></li><li class="L4"><code class="language-java"><span class="pln">        linkLast</span><span class="pun">(</span><span class="pln">element</span><span class="pun">);</span><span class="pln">  </span><span class="com">//如果索引就是链表尾，直接调用尾部插入方法,与上一种方法相同</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L6"><code class="language-java"><span class="pln">        linkBefore</span><span class="pun">(</span><span class="pln">element</span><span class="pun">,</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">index</span><span class="pun">));</span><span class="pln">  </span><span class="com">//查找指定索引结点，在其前驱插入</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="kaj9"><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">//置换元素，旧元素后移</span></code></li><li class="L1"><code class="language-java"><span class="kwd">void</span><span class="pln"> linkBefore</span><span class="pun">(</span><span class="pln">E e</span><span class="pun">,</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> succ</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="com">// assert succ != null;</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> pred </span><span class="pun">=</span><span class="pln"> succ</span><span class="pun">.</span><span class="pln">prev</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> newNode </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;&gt;(</span><span class="pln">pred</span><span class="pun">,</span><span class="pln"> e</span><span class="pun">,</span><span class="pln"> succ</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">    succ</span><span class="pun">.</span><span class="pln">prev </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">pred </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span></code></li><li class="L7"><code class="language-java"><span class="pln">        first </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="kwd">else</span></code></li><li class="L9"><code class="language-java"><span class="pln">        pred</span><span class="pun">.</span><span class="pln">next </span><span class="pun">=</span><span class="pln"> newNode</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">    size</span><span class="pun">++;</span></code></li><li class="L1"><code class="language-java"><span class="pln">    modCount</span><span class="pun">++;</span></code></li><li class="L2"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="eqca" id="4-set">(4) set</h2><p data-anchor-id="qtfh">将指定索引处元素替换为目标元素。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ub46"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> E set</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">,</span><span class="pln"> E element</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    checkElementIndex</span><span class="pun">(</span><span class="pln">index</span><span class="pun">);</span><span class="pln">  </span><span class="com">//检查索引</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> node</span><span class="pun">(</span><span class="pln">index</span><span class="pun">);</span><span class="pln">  </span><span class="com">//查找索引出元素，然后直接诶替换</span></code></li><li class="L3"><code class="language-java"><span class="pln">    E oldVal </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">item</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    x</span><span class="pun">.</span><span class="pln">item </span><span class="pun">=</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> oldVal</span><span class="pun">;</span><span class="pln">  </span><span class="com">//返回被替换元素</span></code></li><li class="L6"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="ol57" id="5-remove">(5) remove</h2><p data-anchor-id="modm">删除元素有两种方式，第一种比较简单，先根据索引找，然后直接删除。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="7lft"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> E remove</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> index</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    checkElementIndex</span><span class="pun">(</span><span class="pln">index</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> unlink</span><span class="pun">(</span><span class="pln">node</span><span class="pun">(</span><span class="pln">index</span><span class="pun">));</span></code></li><li class="L3"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="9bgt">第二种按顺序查找链表中第一个与指定元素等价的元素，然后删除</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="qub7"><ol class="linenums"><li class="L0"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">boolean</span><span class="pln"> remove</span><span class="pun">(</span><span class="typ">Object</span><span class="pln"> o</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">item </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L4"><code class="language-java"><span class="pln">                unlink</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span></code></li><li class="L5"><code class="language-java"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L6"><code class="language-java"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L7"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> first</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">!=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span><span class="pln"> x </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">            </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">o</span><span class="pun">.</span><span class="pln">equals</span><span class="pun">(</span><span class="pln">x</span><span class="pun">.</span><span class="pln">item</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">                unlink</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span></code></li><li class="L2"><code class="language-java"><span class="pln">                </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="o6d5" id="6-unlink">(6) unlink</h2><p data-anchor-id="bck7">上述删除中具体使用的方法，链表的删除就是通过维护前驱和后继完成。</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ihtz"><ol class="linenums"><li class="L0"><code class="language-java"><span class="pln">E unlink</span><span class="pun">(</span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> x</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="com">// assert x != null;</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> E element </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">item</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> next </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">next</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    </span><span class="kwd">final</span><span class="pln"> </span><span class="typ">Node</span><span class="pun">&lt;</span><span class="pln">E</span><span class="pun">&gt;</span><span class="pln"> prev </span><span class="pun">=</span><span class="pln"> x</span><span class="pun">.</span><span class="pln">prev</span><span class="pun">;</span></code></li><li class="L5"><code class="language-java"></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="com">//上一结点为null，将下一结点设为头结点</span></code></li><li class="L7"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">prev </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L8"><code class="language-java"><span class="pln">        first </span><span class="pun">=</span><span class="pln"> next</span><span class="pun">;</span></code></li><li class="L9"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code class="language-java"><span class="pln">        </span><span class="com">//链接到下一结点</span></code></li><li class="L1"><code class="language-java"><span class="pln">        prev</span><span class="pun">.</span><span class="pln">next </span><span class="pun">=</span><span class="pln"> next</span><span class="pun">;</span></code></li><li class="L2"><code class="language-java"><span class="pln">        x</span><span class="pun">.</span><span class="pln">prev </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L4"><code class="language-java"></code></li><li class="L5"><code class="language-java"><span class="pln">    </span><span class="com">//下一结点为null，将下一结点设为尾结点</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">next </span><span class="pun">==</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L7"><code class="language-java"><span class="pln">        last </span><span class="pun">=</span><span class="pln"> prev</span><span class="pun">;</span></code></li><li class="L8"><code class="language-java"><span class="pln">    </span><span class="pun">}</span><span class="pln"> </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code class="language-java"><span class="pln">        next</span><span class="pun">.</span><span class="pln">prev </span><span class="pun">=</span><span class="pln"> prev</span><span class="pun">;</span></code></li><li class="L0"><code class="language-java"><span class="pln">        x</span><span class="pun">.</span><span class="pln">next </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L1"><code class="language-java"><span class="pln">    </span><span class="pun">}</span></code></li><li class="L2"><code class="language-java"></code></li><li class="L3"><code class="language-java"><span class="pln">    x</span><span class="pun">.</span><span class="pln">item </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">null</span><span class="pun">;</span></code></li><li class="L4"><code class="language-java"><span class="pln">    size</span><span class="pun">--;</span></code></li><li class="L5"><code class="language-java"><span class="pln">    modCount</span><span class="pun">++;</span></code></li><li class="L6"><code class="language-java"><span class="pln">    </span><span class="kwd">return</span><span class="pln"> element</span><span class="pun">;</span></code></li><li class="L7"><code class="language-java"><span class="pun">}</span></code></li></ol></pre></div>
</body>
</html>