<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>Servlet工作机制</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="rywh" id="servlet工作机制">Servlet工作机制</h1><p data-anchor-id="0foc"><code>笔记</code></p><hr><p data-anchor-id="cdg8"><div class="toc"><div class="toc">
<ul>
<li><a href="#servlet工作机制">Servlet工作机制</a><ul>
<li><a href="#tomcat容器处理请求过程">Tomcat容器处理请求过程</a></li>
<li><a href="#servlet生命周期">Servlet生命周期</a></li>
<li><a href="#serlvet初始化过程">serlvet初始化过程</a></li>
</ul>
</li>
</ul>
</div>
</div>
</p><hr><div class="md-section-divider"></div><h2 data-anchor-id="rikh" id="tomcat容器处理请求过程">Tomcat容器处理请求过程</h2><div class="md-section-divider"></div><div class="sequence-diagram theme theme-white" title="点击查看大图" data-anchor-id="lqif"><svg height="576" version="1.1" width="1060" xmlns="http://www.w3.org/2000/svg" style="overflow: hidden; position: relative;"><desc style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Created with Raphaël 2.1.2</desc><defs style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block-obj1" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><marker id="raphael-marker-endblock55-obj2" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#raphael-marker-block-obj1" transform="rotate(180 2.5 2.5) scale(1,1)" stroke-width="1.0000" fill="#000" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></use></marker></defs><rect x="10" y="20" width="50" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="20" y="30" width="30" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="35" y="39" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Web</tspan></text><rect x="10" y="518" width="50" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="20" y="528" width="30" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="35" y="537" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Web</tspan></text><path fill="none" stroke="#000000" d="M35,58L35,518" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="243" y="20" width="80" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="253" y="30" width="60" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="283" y="39" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Tomcat</tspan></text><rect x="243" y="518" width="80" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="253" y="528" width="60" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="283" y="537" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Tomcat</tspan></text><path fill="none" stroke="#000000" d="M283,58L283,518" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="576" y="20" width="90" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="586" y="30" width="70" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="621" y="39" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Servlet</tspan></text><rect x="576" y="518" width="90" height="38" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="586" y="528" width="70" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="621" y="537" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Servlet</tspan></text><path fill="none" stroke="#000000" d="M621,58L621,518" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="123" y="74" width="72" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="159" y="83" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">http请求</tspan></text><path fill="none" stroke="#000000" d="M35,96C35,96,242.8711986541748,96,277.99006327055395,96" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="303" y="116" width="74" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="308" y="121" width="64" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="340" y="130" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">分配线程</tspan></text><rect x="293" y="160" width="318" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="452" y="169" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Request和Respnonse（HttpServlet）</tspan></text><path fill="none" stroke="#000000" d="M283,182C283,182,574.0667144060135,182,615.9928280533641,182" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="0" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="303" y="202" width="154" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="308" y="207" width="144" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="380" y="216" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">保持Response引用</tspan></text><rect x="641" y="250" width="324" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="646" y="255" width="314" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="803" y="264" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">调用Service()，根据请求调用不同的方法</tspan></text><rect x="641" y="298" width="234" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="646" y="303" width="224" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="758" y="312" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">具体方法输出内容到Response</tspan></text><rect x="359" y="342" width="186" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="452" y="351" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">调用service()线程结束</tspan></text><path fill="none" stroke="#000000" d="M621,364C621,364,329.9332855939865,364,288.00717194663594,364" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="6,2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path><rect x="69" y="384" width="194" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="74" y="389" width="184" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="166" y="398" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">Response转为http响应</tspan></text><rect x="55" y="432" width="208" height="28" r="0" rx="0" ry="0" fill="none" stroke="#000000" stroke-width="2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><rect x="60" y="437" width="198" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="159" y="446" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">清除Request和Response</tspan></text><rect x="123" y="476" width="72" height="18" r="0" rx="0" ry="0" fill="#ffffff" stroke="none" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></rect><text x="159" y="485" text-anchor="middle" font="10px &quot;Arial&quot;" stroke="none" fill="#000000" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: middle; font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 16px; line-height: normal; font-family: 'Andale Mono', monospace;" font-size="16px" font-family="Andale Mono, monospace"><tspan dy="5" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">http响应</tspan></text><path fill="none" stroke="#000000" d="M283,498C283,498,75.1288013458252,498,40.00993672944605,498" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj2)" stroke-dasharray="6,2" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path></svg></div><p data-anchor-id="er1r">tips：servlet为单例多线程，如果有全局变量则会有同步问题。</p><div class="md-section-divider"></div><h2 data-anchor-id="1u15" id="servlet生命周期">Servlet生命周期</h2><table data-anchor-id="mx73" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th style="text-align:center;">方法</th>
 <th style="text-align:center;">调用</th>
 <th style="text-align:center;">作用</th>
 <th style="text-align:left;">是否覆盖</th>
</tr>
</thead>
<tbody><tr>
 <td style="text-align:center;">init()</td>
 <td style="text-align:center;">servlet创建后，准备处理请求之前</td>
 <td style="text-align:center;">servlet数据初始化，只调用一次</td>
 <td style="text-align:left;">可以，如需获取数据库连接</td>
</tr>
<tr>
 <td style="text-align:center;">service()</td>
 <td style="text-align:center;">容器封装完请求，分配好线程后调用</td>
 <td style="text-align:center;">(多线程)根据请求头，调用具体的方法，如doGet()</td>
 <td style="text-align:left;">一般不覆盖，覆盖后可以处理任何请求类型</td>
</tr>
<tr>
 <td style="text-align:center;">doGet()...</td>
 <td style="text-align:center;">由service()选择合适的方法调用</td>
 <td style="text-align:center;">(多线程)请求的全部处理都由此方法实现</td>
 <td style="text-align:left;">至少覆盖一个，不覆盖的类型表示不支持</td>
</tr>
<tr>
 <td style="text-align:center;">destroy()</td>
 <td style="text-align:center;">容器服务停止或servlet长时间休眠</td>
 <td style="text-align:center;">可以清除资源，如gc()，只调用一次</td>
 <td style="text-align:left;">可以，根据需要</td>
</tr>
</tbody></table><p data-anchor-id="8fjx">tips：容器可以配置请求处理的线程数，如请求数超过，则需要等待。</p><div class="md-section-divider"></div><h2 data-anchor-id="t9z3" id="serlvet初始化过程">serlvet初始化过程</h2><p data-anchor-id="5t72">1.容器启动，搜索所有Servlet类，加载上下文参数：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="dmnt"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="com">&lt;!-- 全局初始化参数，存于ServletContext中 --&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="com">&lt;!-- 每一个ServletConfig都包含ServletContext对象的引用 --&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="tag">&lt;context-param&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;param-name&gt;</span><span class="pln">I</span><span class="tag">&lt;/param-name&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;param-value&gt;</span><span class="pln">Robot</span><span class="tag">&lt;/param-value&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="tag">&lt;/context-param&gt;</span></code></li></ol></pre><p data-anchor-id="u3ev">2.根据load-on-startup选择加载时机，立刻加载或懒加载(有请求发起) <br>
3.调用servlet的构造函数，只用于创建对象，不要覆盖 <br>
4.调用init方法，可以从DD文件加载初始化参数：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="stji"><ol class="linenums"><li class="L0"><code class="language-xml"><span class="tag">&lt;servlet&gt;</span></code></li><li class="L1"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;servlet-name&gt;</span><span class="pln">IndexServlet</span><span class="tag">&lt;/servlet-name&gt;</span></code></li><li class="L2"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;servlet-class&gt;</span><span class="pln">common.servlet.IndexServlet</span><span class="tag">&lt;/servlet-class&gt;</span></code></li><li class="L3"><code class="language-xml"><span class="pln">    </span><span class="com">&lt;!-- 单个Servlet初始化参数 --&gt;</span></code></li><li class="L4"><code class="language-xml"><span class="pln">    </span><span class="com">&lt;!-- 每一个Servlet都有对应的ServletConfig --&gt;</span></code></li><li class="L5"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;init-param&gt;</span></code></li><li class="L6"><code class="language-xml"><span class="pln">        </span><span class="tag">&lt;param-name&gt;</span><span class="pln">name</span><span class="tag">&lt;/param-name&gt;</span></code></li><li class="L7"><code class="language-xml"><span class="pln">        </span><span class="tag">&lt;param-value&gt;</span><span class="pln">zhoulychn</span><span class="tag">&lt;/param-value&gt;</span></code></li><li class="L8"><code class="language-xml"><span class="pln">    </span><span class="tag">&lt;/init-param&gt;</span></code></li><li class="L9"><code class="language-xml"><span class="tag">&lt;/servlet&gt;</span></code></li></ol></pre><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="ypdk"><ol class="linenums"><li class="L0"><code class="language-java"><span class="com">//GenericServlet 实现的init()方法，由容器调用，注入一个封装好的ServletConfig实例</span></code></li><li class="L1"><code class="language-java"><span class="kwd">public</span><span class="pln"> </span><span class="kwd">void</span><span class="pln"> init</span><span class="pun">(</span><span class="typ">ServletConfig</span><span class="pln"> config</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">throws</span><span class="pln"> </span><span class="typ">ServletException</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code class="language-java"><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">config </span><span class="pun">=</span><span class="pln"> config</span><span class="pun">;</span></code></li><li class="L3"><code class="language-java"><span class="pln">    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">init</span><span class="pun">();</span><span class="pln">  </span><span class="com">//调用自己覆盖的无参初始化方法</span></code></li><li class="L4"><code class="language-java"><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="qn8f">5.监听器</p><table data-anchor-id="uxup" class="table table-striped-white table-bordered">
<thead>
<tr>
 <th style="text-align:center;">使用场景</th>
 <th style="text-align:center;">接口</th>
 <th style="text-align:center;">事件类型</th>
</tr>
</thead>
<tbody><tr>
 <td style="text-align:center;">SerlvetContext增加、删除、替换属性</td>
 <td style="text-align:center;">ServletContextAttributeListener</td>
 <td style="text-align:center;">ServletContextAttributeEvent</td>
</tr>
<tr>
 <td style="text-align:center;">session创建、销毁</td>
 <td style="text-align:center;">HttpSessionListener</td>
 <td style="text-align:center;">HttpSessionEvent</td>
</tr>
<tr>
 <td style="text-align:center;">request创建、销毁</td>
 <td style="text-align:center;">ServletRequestListener</td>
 <td style="text-align:center;">ServletRequestEvent</td>
</tr>
<tr>
 <td style="text-align:center;">request增加、删除、替换属性</td>
 <td style="text-align:center;">ServletRequestAttributeListener</td>
 <td style="text-align:center;">ServletRequestAttributeEvent</td>
</tr>
<tr>
 <td style="text-align:center;">session增加、删除该实现类</td>
 <td style="text-align:center;">HttpSessionBindingListener</td>
 <td style="text-align:center;">HttpSessionBindingEvent</td>
</tr>
<tr>
 <td style="text-align:center;">session增加、删除、替换属性</td>
 <td style="text-align:center;">HttpSessionAttributeListener</td>
 <td style="text-align:center;">HttpSessionBindingEvent</td>
</tr>
<tr>
 <td style="text-align:center;">容器启动、停止</td>
 <td style="text-align:center;">ServletContextListener</td>
 <td style="text-align:center;">ServletContextEvent</td>
</tr>
<tr>
 <td style="text-align:center;">实现类绑定的session迁移</td>
 <td style="text-align:center;">HttpSessionActivationListener</td>
 <td style="text-align:center;">HttpSessionEvent</td>
</tr>
</tbody></table><p data-anchor-id="niuh">6.web容器加载顺序 <br>
context-param -&gt; listener -&gt; filter -&gt; servlet（同类型按先后）</p><p data-anchor-id="7hlw">7.servlet映射规则 <br>
servlet匹配多个，取最长（最精确）的匹配。</p></div>
</body>
</html>